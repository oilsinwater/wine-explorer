# Single Page Workspace Integration - Brownfield Addition

## User Story

As a faculty member guiding a seminar,
I want the interactive Wine Explorer workspace to live within the home page,
So that participants can move from the research overview into exploration without navigating to a separate route.

## Story Context

**Existing System Integration:**

- Integrates with: `src/pages/index.tsx`, `src/pages/wine-explorer.tsx`, routing defined in `routeTree.gen.ts`
- Technology: React 18 + TypeScript, TanStack Router, Material UI, Plotly, shared context providers (`AccessibilityProvider`, `AppProvider`, `WineDataContext`)
- Follows pattern: The existing workspace layout used on `/wine-explorer` and the academic landing sections introduced during the Are.na-inspired refresh
- Touch points: Removal/repurposing of `/wine-explorer` route, merging of workspace components into the `/` route, CTA logic pointing to anchors instead of route navigation

## Acceptance Criteria

**Functional Requirements:**

1. The home page renders the dataset selector, filter panel, info panel, and visualization area below the existing landing sections.
2. The “Open analysis workspace” CTA scrolls/focuses the embedded workspace section instead of routing to `/wine-explorer`.
3. The `/wine-explorer` route is removed or redirected so deep links continue to function (e.g., navigate to `/` with workspace hash/anchor).

**Integration Requirements:**

4. `WineDataContext`, `AccessibilityProvider`, and other providers still wrap the workspace and function without errors after consolidation.
5. Keyboard navigation and skip links allow users to reach the embedded workspace efficiently.
6. Existing URL query preservation or state management for filters remains unchanged after the route merge.

**Quality Requirements:**

7. Local tests/build succeed, confirming no TypeScript or lint issues.
8. Manual regression verifies dataset switching, filtering, visualization toggles, and high-contrast controls work in the embedded layout.
9. Bundle size and performance monitored; document any notable change in build warnings resulting from the merge.

## Technical Notes

- **Integration Approach:** Move JSX from `wine-explorer.tsx` into `index.tsx`, extract reusable layout components if duplication becomes excessive, and update router configuration to drop the separate child route.
- **Existing Pattern Reference:** Maintain the current grid layout (selector above, filter/info in sidebar, visualization main column) while respecting the landing page spacing tokens.
- **Key Constraints:** Ensure above-the-fold sections remain accessible; consider anchor IDs for CTA scrolling; avoid breaking direct imports that rely on `/wine-explorer`.

## Definition of Done

- [ ] Functional requirements met
- [ ] Integration requirements verified
- [ ] Existing functionality regression tested
- [ ] Code follows existing patterns and standards
- [ ] Tests pass (existing and new)
- [ ] Documentation (README or landing copy) updated if necessary

## Risk and Compatibility Check

- **Primary Risk:** Consolidation could disrupt routing state or double-mount visualization components, leading to performance or accessibility regressions.
- **Mitigation:** Test navigation flows, ensure single instantiation of context providers, and profile initial load; add lazy loading if required.
- **Rollback:** Reinstate previous `index.tsx` and `wine-explorer.tsx` separation to restore two-route behavior.

**Compatibility Verification:**

- [ ] No breaking changes to existing APIs
- [ ] Database changes (if any) are additive only
- [ ] UI changes follow existing design patterns
- [ ] Performance impact is negligible or documented

## Validation Checklist

**Scope Validation:**

- [ ] Story can be completed in one development session
- [ ] Integration approach is straightforward
- [ ] Follows existing patterns exactly (layout reuse)
- [ ] No design or architecture work required beyond layout merge

**Clarity Check:**

- [ ] Story requirements are unambiguous
- [ ] Integration points are clearly specified
- [ ] Success criteria are testable
- [ ] Rollback approach is simple
